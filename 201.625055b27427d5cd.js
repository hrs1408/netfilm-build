"use strict";(self.webpackChunkfilm_web=self.webpackChunkfilm_web||[]).push([[201],{4201:(M,v,a)=>{a.r(v),a.d(v,{SeriesMoviesComponent:()=>E});var g=a(177),u=a(6693),p=a(3551),h=a(980),c=a(4909),e=a(4438),t=a(3498);const i=n=>["/phim",n];function r(n,d){if(1&n&&(e.j41(0,"span",29),e.EFF(1),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.SpI(" ",o.movies[0].quality," ")}}function s(n,d){if(1&n&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n){const o=e.XpG(2);e.R7$(),e.Lme(" ",e.bMT(2,2,"common.episode")," ",o.movies[0].episode_current," ")}}function _(n,d){if(1&n&&(e.j41(0,"div",11)(1,"div",12),e.nrm(2,"img",13)(3,"div",14)(4,"div",15),e.k0s(),e.j41(5,"div",16)(6,"h1",17),e.EFF(7),e.k0s(),e.j41(8,"h2",18),e.EFF(9),e.k0s(),e.j41(10,"div",19)(11,"span",20),e.EFF(12),e.k0s(),e.DNE(13,r,2,1,"span",21)(14,s,3,4,"span",21),e.k0s(),e.j41(15,"div",22)(16,"a",23),e.qSk(),e.j41(17,"svg",24),e.nrm(18,"path",25),e.k0s(),e.EFF(19),e.nI1(20,"translate"),e.k0s(),e.joV(),e.j41(21,"button",26),e.qSk(),e.j41(22,"svg",27),e.nrm(23,"path",28),e.k0s(),e.EFF(24),e.nI1(25,"translate"),e.k0s()()()()),2&n){const o=e.XpG();e.R7$(2),e.Y8G("src",o.movies[0].thumb_url||o.movies[0].poster_url,e.B4B)("alt",o.movies[0].name),e.R7$(5),e.JRh(o.movies[0].name),e.R7$(2),e.JRh(o.movies[0].origin_name),e.R7$(3),e.JRh(o.movies[0].year),e.R7$(),e.Y8G("ngIf",o.movies[0].quality),e.R7$(),e.Y8G("ngIf",o.movies[0].episode_current),e.R7$(2),e.Y8G("routerLink",e.eq3(14,i,o.movies[0].slug)),e.R7$(3),e.SpI(" ",e.bMT(20,10,"common.watchNow")," "),e.R7$(5),e.SpI(" ",e.bMT(25,12,"common.more")," ")}}function f(n,d){if(1&n&&(e.j41(0,"div",30),e.EFF(1),e.k0s()),2&n){const o=e.XpG();e.R7$(),e.SpI(" ",o.error," ")}}function y(n,d){if(1&n&&(e.j41(0,"span",41),e.EFF(1),e.k0s()),2&n){const o=e.XpG().$implicit;e.R7$(),e.SpI(" ",o.quality," ")}}function b(n,d){if(1&n&&(e.j41(0,"div",42),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n){const o=e.XpG().$implicit;e.R7$(),e.Lme(" ",e.bMT(2,2,"common.episode")," ",o.episode_current," ")}}function x(n,d){if(1&n&&(e.j41(0,"div",31)(1,"div",32),e.nrm(2,"img",33),e.j41(3,"div",34)(4,"h3",35),e.EFF(5),e.k0s(),e.j41(6,"h4",36),e.EFF(7),e.k0s(),e.j41(8,"div",37)(9,"span",38),e.EFF(10),e.k0s(),e.DNE(11,y,2,1,"span",39),e.k0s()(),e.DNE(12,b,3,4,"div",40),e.k0s()()),2&n){const o=d.$implicit;e.Y8G("routerLink",e.eq3(8,i,o.slug)),e.R7$(2),e.Y8G("src",o.poster_url,e.B4B)("alt",o.name),e.R7$(3),e.JRh(o.name),e.R7$(2),e.JRh(o.origin_name),e.R7$(3),e.JRh(o.year),e.R7$(),e.Y8G("ngIf",o.quality),e.R7$(),e.Y8G("ngIf",o.episode_current)}}function P(n,d){1&n&&(e.j41(0,"div",43),e.nrm(1,"app-loading-spinner"),e.k0s())}function C(n,d){if(1&n){const o=e.RV6();e.j41(0,"div",44)(1,"button",45),e.bIt("click",function(){e.eBV(o);const l=e.XpG();return e.Njj(l.loadMore())}),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"common.loadMore")," "))}function k(n,d){1&n&&(e.j41(0,"div",46),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&n&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"common.errors.noMoviesFound")," "))}let E=(()=>{class n{movieService;translate;movies=[];loading=!1;error="";currentPage=1;hasMorePages=!0;constructor(o,m){this.movieService=o,this.translate=m}ngOnInit(){this.loadMovies()}loadMovies(){this.loading||(this.loading=!0,this.error="",this.movieService.getSeriesMovies(this.currentPage).pipe((0,h.j)(()=>{this.loading=!1})).subscribe({next:o=>{this.movies=1===this.currentPage?o.items:[...this.movies,...o.items],this.hasMorePages=this.currentPage<o.pagination.totalPages},error:o=>{this.translate.get("common.loadError").subscribe(m=>{this.error=m}),console.error("Error loading TV series:",o)}}))}loadMore(){!this.loading&&this.hasMorePages&&(this.currentPage++,this.loadMovies())}getPrimaryCategory(o){return o.category?.[0]?.name||""}getSecondaryCategory(o){return o.category?.[1]?.name||null}hasCategories(o){return!!o.category&&o.category.length>0}hasMultipleCategories(o){return!!o.category&&o.category.length>1}static \u0275fac=function(m){return new(m||n)(e.rXU(t.W),e.rXU(c.c$))};static \u0275cmp=e.VBU({type:n,selectors:[["app-series-movies"]],standalone:!0,features:[e.aNF],decls:13,vars:9,consts:[[1,"min-h-screen","bg-black","text-white","pt-16","md:pt-20"],["class","relative w-full",4,"ngIf"],[1,"w-full","px-4","md:px-8","pb-16"],[1,"flex","justify-between","items-center","py-8"],[1,"text-2xl","md:text-3xl","font-bold"],["class","bg-red-900/20 border border-red-500 text-red-500 p-4 rounded-lg mb-6",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","xl:grid-cols-6","2xl:grid-cols-8","gap-3","md:gap-4"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],["class","py-8 text-center",4,"ngIf"],["class","mt-8 flex justify-center",4,"ngIf"],["class","text-center text-gray-400 py-16",4,"ngIf"],[1,"relative","w-full"],[1,"relative","w-full","h-[50vh]","md:h-[70vh]","overflow-hidden"],[1,"w-full","h-full","object-cover","object-center",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black","via-black/70","to-transparent"],[1,"absolute","inset-0","bg-gradient-to-r","from-black/90","to-transparent"],[1,"absolute","inset-0","flex","flex-col","justify-center","px-6","md:px-16","max-w-3xl"],[1,"text-3xl","md:text-5xl","font-bold","mb-2","md:mb-4","text-white"],[1,"text-lg","md:text-xl","text-gray-300","mb-2","md:mb-4"],[1,"flex","items-center","gap-3","mb-4"],[1,"text-sm","px-2","py-1","bg-red-600","text-white","rounded"],["class","text-sm px-2 py-1 bg-gray-700 text-white rounded",4,"ngIf"],[1,"flex","gap-3","mt-4"],[1,"flex","items-center","gap-2","px-6","py-2","bg-red-600","hover:bg-red-700","text-white","rounded-md","transition-colors",3,"routerLink"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["d","M4 4l12 6-12 6V4z"],[1,"flex","items-center","gap-2","px-6","py-2","bg-gray-700","hover:bg-gray-600","text-white","rounded-md","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","px-2","py-1","bg-gray-700","text-white","rounded"],[1,"bg-red-900/20","border","border-red-500","text-red-500","p-4","rounded-lg","mb-6"],[1,"group","cursor-pointer",3,"routerLink"],[1,"relative","overflow-hidden","rounded-md","shadow-lg","transition-transform","duration-300","group-hover:scale-105","group-hover:z-10"],["loading","lazy",1,"w-full","aspect-[2/3]","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/90","via-black/50","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","flex","flex-col","justify-end","p-3"],[1,"text-white","text-sm","font-semibold","line-clamp-2"],[1,"text-gray-300","text-xs","line-clamp-1","mt-1"],[1,"flex","items-center","gap-2","mt-2"],[1,"text-xs","px-2","py-0.5","bg-red-600","text-white","rounded"],["class","text-xs px-2 py-0.5 bg-blue-600 text-white rounded",4,"ngIf"],["class","absolute top-2 right-2 px-2 py-0.5 bg-red-600 text-white rounded text-xs",4,"ngIf"],[1,"text-xs","px-2","py-0.5","bg-blue-600","text-white","rounded"],[1,"absolute","top-2","right-2","px-2","py-0.5","bg-red-600","text-white","rounded","text-xs"],[1,"py-8","text-center"],[1,"mt-8","flex","justify-center"],[1,"px-6","py-3","bg-red-600","hover:bg-red-700","text-white","rounded-md","transition-colors",3,"click"],[1,"text-center","text-gray-400","py-16"]],template:function(m,l){1&m&&(e.j41(0,"div",0),e.DNE(1,_,26,16,"div",1),e.j41(2,"div",2)(3,"div",3)(4,"h2",4),e.EFF(5),e.nI1(6,"translate"),e.k0s()(),e.DNE(7,f,2,1,"div",5),e.j41(8,"div",6),e.DNE(9,x,13,10,"div",7),e.k0s(),e.DNE(10,P,2,0,"div",8)(11,C,4,3,"div",9)(12,k,3,3,"div",10),e.k0s()()),2&m&&(e.R7$(),e.Y8G("ngIf",!l.loading&&!l.error&&l.movies.length>0),e.R7$(4),e.JRh(e.bMT(6,7,"common.series")),e.R7$(2),e.Y8G("ngIf",l.error),e.R7$(2),e.Y8G("ngForOf",l.movies),e.R7$(),e.Y8G("ngIf",l.loading),e.R7$(),e.Y8G("ngIf",!l.loading&&!l.error&&l.hasMorePages),e.R7$(),e.Y8G("ngIf",!l.loading&&!l.error&&0===l.movies.length))},dependencies:[g.MD,g.Sq,g.bT,u.iI,u.Wk,p.N,c.h,c.D9],styles:['@charset "UTF-8";.movie-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem;padding:2rem 0}.movie-card[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:.375rem;overflow:hidden}.movie-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);z-index:10}.movie-card[_ngcontent-%COMP%]:hover   .movie-info[_ngcontent-%COMP%]{opacity:1}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]{position:relative;padding-top:150%;background:#141414}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]   .quality-badge[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;background:#e50914e6;color:#fff;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:600;z-index:1}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]   .episode-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:.5rem;background:linear-gradient(0deg,#000000e6,#0000);color:#fff;font-size:.75rem;text-align:center;z-index:1}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:1rem;background:linear-gradient(0deg,#000000e6,#000000b3 70%,#0000);opacity:0;transition:opacity .3s ease;color:#fff}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.5rem;line-height:1.2}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:#d1d5db}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin-left:.5rem}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.875rem;color:#9ca3af}h1[_ngcontent-%COMP%]{background:linear-gradient(to right,#e50914,#ff5f59);-webkit-background-clip:text;color:transparent;display:inline-block;letter-spacing:-.5px}']})}return n})()},3551:(M,v,a)=>{a.d(v,{N:()=>u});var g=a(4438);let u=(()=>{class p{static \u0275fac=function(e){return new(e||p)};static \u0275cmp=g.VBU({type:p,selectors:[["app-loading-spinner"]],standalone:!0,features:[g.aNF],decls:2,vars:0,consts:[[1,"flex","justify-center","items-center","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-accent"]],template:function(e,t){1&e&&(g.j41(0,"div",0),g.nrm(1,"div",1),g.k0s())},encapsulation:2})}return p})()},3498:(M,v,a)=>{a.d(v,{W:()=>h});var g=a(6354),u=a(4438),p=a(1626);let h=(()=>{class c{http;baseUrl="https://phimapi.com";constructor(t){this.http=t}imageBaseUrl="https://phimimg.com";addImageBaseUrl(t){return t&&(t.startsWith("http")?t:`${this.imageBaseUrl}/${t}`)}transformResponse(t,i){try{if(i){const r=t;return r.data?.items?{items:r.data.items.map(s=>({...s,poster_url:this.addImageBaseUrl(s.poster_url),thumb_url:this.addImageBaseUrl(s.thumb_url)})),pagination:r.data.params.pagination}:{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}{const r=t;return r.items?{items:r.items.map(s=>({...s,poster_url:this.addImageBaseUrl(s.poster_url),thumb_url:this.addImageBaseUrl(s.thumb_url)})),pagination:r.pagination}:{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}}catch(r){return console.error("Error transforming response:",r),{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}}isV1Endpoint(t){return t.includes("/v1/api/")}makeRequest(t,i={}){const r=`${this.baseUrl}${t}`,s=this.isV1Endpoint(t),_={...i};return this.http.get(r,{params:_}).pipe((0,g.T)(f=>{try{return this.transformResponse(f,s)}catch(y){return console.error(`Error processing response from ${t}:`,y),{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}}))}getLatestMovies(t=1){return this.makeRequest("/danh-sach/phim-moi-cap-nhat",{page:t.toString()})}getMoviesByCategory(t,i=1){return this.makeRequest(`/v1/api/the-loai/${t}`,{page:i.toString()})}getMoviesByCountry(t,i=1){return this.makeRequest(`/v1/api/quoc-gia/${t}`,{page:i.toString()})}getMoviesByCategoryAndCountry(t,i,r=1){return this.makeRequest(`/v1/api/the-loai/${t}?country=${i}`,{page:r.toString()})}getMovieDetails(t){return this.http.get(`${this.baseUrl}/phim/${t}`).pipe((0,g.T)(r=>{try{return r.movie?{...r,movie:{...r.movie,poster_url:this.addImageBaseUrl(r.movie.poster_url),thumb_url:this.addImageBaseUrl(r.movie.thumb_url)}}:(console.warn("Movie details not found in response:",r),{status:!1,msg:"Movie not found",movie:{_id:"",name:"Movie not found",slug:t,origin_name:"",poster_url:"",thumb_url:"",year:0,modified:{time:""}},episodes:[]})}catch(s){return console.error("Error processing movie details:",s),{status:!1,msg:"Error processing movie details",movie:{_id:"",name:"Error loading movie",slug:t,origin_name:"",poster_url:"",thumb_url:"",year:0,modified:{time:""}},episodes:[]}}}))}getTrendingMovies(t=1){return this.makeRequest("/v1/api/danh-sach/tv-shows",{page:t.toString()})}getSingleMovies(t=1){return this.makeRequest("/v1/api/danh-sach/phim-le",{page:t.toString()})}getSeriesMovies(t=1){return this.makeRequest("/v1/api/danh-sach/phim-bo",{page:t.toString()})}getAnimeMovies(t=1){return this.makeRequest("/v1/api/danh-sach/hoat-hinh",{page:t.toString()})}getMoviesByYear(t,i=1,r={}){const s={page:i.toString()};return r.sort_field&&(s.sort_field=r.sort_field),r.sort_type&&(s.sort_type=r.sort_type),r.sort_lang&&(s.sort_lang=r.sort_lang),r.category&&(s.category=r.category),r.country&&(s.country=r.country),r.limit&&(s.limit=r.limit.toString()),this.makeRequest(`/v1/api/nam/${t}`,s)}getCategories(){return this.http.get(`${this.baseUrl}/the-loai`)}getCountries(){return this.http.get(`${this.baseUrl}/quoc-gia`)}searchMovies(t){const i={};return t.keyword&&""!==t.keyword.trim()&&(i.keyword=t.keyword),t.page&&(i.page=t.page.toString()),t.sort_field&&(i.sort_field=t.sort_field),t.sort_type&&(i.sort_type=t.sort_type),t.sort_lang&&(i.sort_lang=t.sort_lang),t.category&&(i.category=t.category),t.country&&(i.country=t.country),t.year&&(i.year=t.year.toString()),t.limit&&(i.limit=t.limit.toString()),this.makeRequest("/v1/api/tim-kiem",i)}static \u0275fac=function(i){return new(i||c)(u.KVO(p.Qq))};static \u0275prov=u.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);