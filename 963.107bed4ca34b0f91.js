"use strict";(self.webpackChunkfilm_web=self.webpackChunkfilm_web||[]).push([[963],{2963:(M,h,r)=>{r.r(h),r.d(h,{AnimeMoviesComponent:()=>P});var s=r(177),p=r(8094),m=r(3551),_=r(980),g=r(7408),t=r(4438),e=r(3498);const a=i=>["/phim",i];function o(i,u){if(1&i&&(t.j41(0,"div",10),t.EFF(1),t.k0s()),2&i){const n=t.XpG();t.R7$(),t.SpI(" ",n.error," ")}}function c(i,u){if(1&i&&(t.j41(0,"span",21),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.quality," ")}}function v(i,u){if(1&i&&(t.j41(0,"div",22),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.Lme(" ",t.bMT(2,2,"common.episode")," ",n.episode_current," ")}}function f(i,u){if(1&i&&(t.j41(0,"div",11)(1,"div",12),t.nrm(2,"img",13),t.j41(3,"div",14)(4,"h3",15),t.EFF(5),t.k0s(),t.j41(6,"h4",16),t.EFF(7),t.k0s(),t.j41(8,"div",17)(9,"span",18),t.EFF(10),t.k0s(),t.DNE(11,c,2,1,"span",19),t.k0s()(),t.DNE(12,v,3,4,"div",20),t.k0s()()),2&i){const n=u.$implicit;t.Y8G("routerLink",t.eq3(8,a,n.slug)),t.R7$(2),t.Y8G("src",n.poster_url,t.B4B)("alt",n.name),t.R7$(3),t.JRh(n.name),t.R7$(2),t.JRh(n.origin_name),t.R7$(3),t.JRh(n.year),t.R7$(),t.Y8G("ngIf",n.quality),t.R7$(),t.Y8G("ngIf",n.episode_current)}}function y(i,u){1&i&&(t.j41(0,"div",23),t.nrm(1,"app-loading-spinner"),t.k0s())}function b(i,u){if(1&i){const n=t.RV6();t.j41(0,"div",23)(1,"button",24),t.bIt("click",function(){t.eBV(n);const d=t.XpG();return t.Njj(d.loadMore())}),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}2&i&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"common.loadMore")," "))}function C(i,u){1&i&&(t.j41(0,"div",25),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.noContent")," "))}let P=(()=>{class i{movieService;translate;movies=[];loading=!1;error="";currentPage=1;hasMorePages=!0;constructor(n,l){this.movieService=n,this.translate=l}ngOnInit(){this.loadMovies()}loadMovies(){this.loading||(this.loading=!0,this.error="",this.movieService.getAnimeMovies(this.currentPage).pipe((0,_.j)(()=>{this.loading=!1})).subscribe({next:n=>{this.movies=1===this.currentPage?n.items:[...this.movies,...n.items],this.hasMorePages=this.currentPage<n.pagination.totalPages},error:n=>{this.translate.get("common.loadError").subscribe(l=>{this.error=l}),console.error("Error loading anime:",n)}}))}loadMore(){!this.loading&&this.hasMorePages&&(this.currentPage++,this.loadMovies())}getPrimaryCategory(n){return n.category?.[0]?.name||""}getSecondaryCategory(n){return n.category?.[1]?.name||null}hasCategories(n){return!!n.category&&n.category.length>0}hasMultipleCategories(n){return!!n.category&&n.category.length>1}static \u0275fac=function(l){return new(l||i)(t.rXU(e.W),t.rXU(g.c$))};static \u0275cmp=t.VBU({type:i,selectors:[["app-anime-movies"]],standalone:!0,features:[t.aNF],decls:15,vars:11,consts:[[1,"min-h-screen","bg-white","dark:bg-[#141414]","text-gray-900","dark:text-white"],[1,"container","mx-auto","px-4"],[1,"py-8"],[1,"text-4xl","font-bold","mb-2"],[1,"text-gray-600","dark:text-gray-400"],["class","bg-red-50 dark:bg-red-500/10 border border-red-500 text-red-600 dark:text-red-500 p-4 rounded-lg mb-6",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","gap-4"],["class","group cursor-pointer transition-transform hover:scale-105",3,"routerLink",4,"ngFor","ngForOf"],["class","py-8 text-center",4,"ngIf"],["class","text-center text-gray-600 dark:text-gray-400 py-8",4,"ngIf"],[1,"bg-red-50","dark:bg-red-500/10","border","border-red-500","text-red-600","dark:text-red-500","p-4","rounded-lg","mb-6"],[1,"group","cursor-pointer","transition-transform","hover:scale-105",3,"routerLink"],[1,"relative","overflow-hidden","rounded-lg","shadow-lg","bg-gray-100","dark:bg-gray-800"],["loading","lazy",1,"w-full","aspect-[2/3]","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/90","via-black/50","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","flex","flex-col","justify-end","p-3"],[1,"text-white","text-sm","font-semibold","line-clamp-2"],[1,"text-gray-300","text-xs","line-clamp-1","mt-1"],[1,"flex","items-center","gap-2","mt-2"],[1,"text-xs","px-2","py-0.5","bg-red-600","text-white","rounded"],["class","text-xs px-2 py-0.5 bg-blue-600 text-white rounded",4,"ngIf"],["class","absolute top-2 right-2 px-2 py-0.5 bg-red-600 text-white rounded text-xs",4,"ngIf"],[1,"text-xs","px-2","py-0.5","bg-blue-600","text-white","rounded"],[1,"absolute","top-2","right-2","px-2","py-0.5","bg-red-600","text-white","rounded","text-xs"],[1,"py-8","text-center"],[1,"bg-red-600","hover:bg-red-700","text-white","font-medium","px-6","py-2","rounded","transition-colors",3,"click"],[1,"text-center","text-gray-600","dark:text-gray-400","py-8"]],template:function(l,d){1&l&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"p",4),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.DNE(9,o,2,1,"div",5),t.j41(10,"div",6),t.DNE(11,f,13,10,"div",7),t.k0s(),t.DNE(12,y,2,0,"div",8)(13,b,4,3,"div",8)(14,C,3,3,"div",9),t.k0s()()),2&l&&(t.R7$(4),t.JRh(t.bMT(5,7,"common.anime")),t.R7$(3),t.JRh(t.bMT(8,9,"common.latestAnime")),t.R7$(2),t.Y8G("ngIf",d.error),t.R7$(2),t.Y8G("ngForOf",d.movies),t.R7$(),t.Y8G("ngIf",d.loading),t.R7$(),t.Y8G("ngIf",!d.loading&&!d.error&&d.hasMorePages),t.R7$(),t.Y8G("ngIf",!d.loading&&!d.error&&0===d.movies.length))},dependencies:[s.MD,s.Sq,s.bT,p.iI,p.Wk,m.N,g.h,g.D9],styles:['@charset "UTF-8";.movie-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem;padding:2rem 0}.movie-card[_ngcontent-%COMP%]{position:relative;transition:all .3s ease;border-radius:.375rem;overflow:hidden}.movie-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);z-index:10}.movie-card[_ngcontent-%COMP%]:hover   .movie-info[_ngcontent-%COMP%]{opacity:1}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]{position:relative;padding-top:150%;background:#141414}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]   .quality-badge[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;background:#e50914e6;color:#fff;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:600;z-index:1}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]   .episode-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:.5rem;background:linear-gradient(0deg,#000000e6,#0000);color:#fff;font-size:.75rem;font-weight:500;text-align:center;z-index:1}.movie-card[_ngcontent-%COMP%]   .movie-poster[_ngcontent-%COMP%]   .episode-badge[_ngcontent-%COMP%]:before{content:"Episode ";opacity:.7}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:1rem;background:linear-gradient(0deg,#000000e6,#000000b3 70%,#0000);opacity:0;transition:opacity .3s ease;color:#fff}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.25rem;line-height:1.2}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-style:italic;opacity:.8}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:#d1d5db;margin-top:.5rem}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin-left:.5rem}.movie-card[_ngcontent-%COMP%]   .movie-info[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.875rem;color:#9ca3af}h1[_ngcontent-%COMP%]{background:linear-gradient(to right,#e50914,#ff5f59);-webkit-background-clip:text;color:transparent;display:inline-block;letter-spacing:-.5px}']})}return i})()},3551:(M,h,r)=>{r.d(h,{N:()=>p});var s=r(4438);let p=(()=>{class m{static \u0275fac=function(t){return new(t||m)};static \u0275cmp=s.VBU({type:m,selectors:[["app-loading-spinner"]],standalone:!0,features:[s.aNF],decls:2,vars:0,consts:[[1,"flex","justify-center","items-center","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-accent"]],template:function(t,e){1&t&&(s.j41(0,"div",0),s.nrm(1,"div",1),s.k0s())},encapsulation:2})}return m})()},3498:(M,h,r)=>{r.d(h,{W:()=>_});var s=r(6354),p=r(4438),m=r(1626);let _=(()=>{class g{http;baseUrl="https://phimapi.com";constructor(e){this.http=e}imageBaseUrl="https://phimimg.com";addImageBaseUrl(e){return e&&(e.startsWith("http")?e:`${this.imageBaseUrl}/${e}`)}transformResponse(e,a){if(a){const o=e;if("success"!==o.status)throw new Error(o.msg||"API returned unsuccessful status");if(!o.data?.items)throw new Error("No items found in response");return{items:o.data.items.map(c=>({...c,poster_url:this.addImageBaseUrl(c.poster_url),thumb_url:this.addImageBaseUrl(c.thumb_url)})),pagination:o.data.params.pagination}}{const o=e;if(!o.status)throw new Error("API returned unsuccessful status");if(!o.items)throw new Error("No items found in response");return{items:o.items.map(c=>({...c,poster_url:this.addImageBaseUrl(c.poster_url),thumb_url:this.addImageBaseUrl(c.thumb_url)})),pagination:o.pagination}}}isV1Endpoint(e){return e.includes("/v1/api/")}makeRequest(e,a={}){const o=`${this.baseUrl}${e}`,c=this.isV1Endpoint(e),v={...a};return this.http.get(o,{params:v}).pipe((0,s.T)(f=>this.transformResponse(f,c)))}getLatestMovies(e=1){return this.makeRequest("/danh-sach/phim-moi-cap-nhat",{page:e.toString()})}getMoviesByCategory(e,a=1){return this.makeRequest(`/v1/api/the-loai/${e}`,{page:a.toString()})}getMoviesByCountry(e,a=1){return this.makeRequest(`/v1/api/quoc-gia/${e}`,{page:a.toString()})}getMoviesByCategoryAndCountry(e,a,o=1){return this.makeRequest(`/v1/api/the-loai/${e}?country=${a}`,{page:o.toString()})}getMovieDetails(e){return this.http.get(`${this.baseUrl}/phim/${e}`).pipe((0,s.T)(o=>{if(!o.status)throw new Error(o.msg||"Failed to fetch movie details");return{...o,movie:{...o.movie,poster_url:this.addImageBaseUrl(o.movie.poster_url),thumb_url:this.addImageBaseUrl(o.movie.thumb_url)}}}))}getTrendingMovies(e=1){return this.makeRequest("/v1/api/danh-sach/tv-shows",{page:e.toString()})}getSingleMovies(e=1){return this.makeRequest("/v1/api/danh-sach/phim-le",{page:e.toString()})}getSeriesMovies(e=1){return this.makeRequest("/v1/api/danh-sach/phim-bo",{page:e.toString()})}getAnimeMovies(e=1){return this.makeRequest("/v1/api/danh-sach/hoat-hinh",{page:e.toString()})}getCategories(){return this.http.get(`${this.baseUrl}/the-loai`)}getCountries(){return this.http.get(`${this.baseUrl}/quoc-gia`)}searchMovies(e){const o={};return e.keyword&&(o.keyword=e.keyword),e.page&&(o.page=e.page.toString()),e.sort_field&&(o.sort_field=e.sort_field),e.sort_type&&(o.sort_type=e.sort_type),e.sort_lang&&(o.sort_lang=e.sort_lang),e.category&&(o.category=e.category),e.country&&(o.country=e.country),e.year&&(o.year=e.year.toString()),e.limit&&(o.limit=e.limit.toString()),this.makeRequest("/v1/api/tim-kiem",o)}static \u0275fac=function(a){return new(a||g)(p.KVO(m.Qq))};static \u0275prov=p.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);