"use strict";(self.webpackChunkfilm_web=self.webpackChunkfilm_web||[]).push([[22],{5022:(F,g,s)=>{s.r(g),s.d(g,{LoginComponent:()=>C});var h=s(467),a=s(9417),d=s(177),u=s(7408),m=s(9635),t=s(4438),p=s(5270),f=s(788),b=s(1413);let w=(()=>{class n{notificationSubject=new b.B;notification$=this.notificationSubject.asObservable();constructor(){}success(e,r=3e3){this.show(e,"success",r)}error(e,r=5e3){this.show(e,"error",r)}warning(e,r=4e3){this.show(e,"warning",r)}info(e,r=3e3){this.show(e,"info",r)}show(e,r,o){this.notificationSubject.next({message:e,type:r,duration:o})}static \u0275fac=function(r){return new(r||n)};static \u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function v(n,c){if(1&n&&(t.j41(0,"div",15),t.EFF(1),t.j41(2,"div",16),t.EFF(3),t.k0s()()),2&n){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorMessage," "),t.R7$(2),t.SpI(" T\xe0i kho\u1ea3n \u0111ang b\u1ecb kho\xe1. Vui l\xf2ng th\u1eed l\u1ea1i sau ",e.remainingLockTime," ph\xfat ")}}function k(n,c){if(1&n&&(t.j41(0,"div",18),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" C\xf2n ",e.remainingAttempts," l\u1ea7n th\u1eed ")}}function x(n,c){if(1&n&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"translate"),t.DNE(3,k,2,1,"div",17),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.SpI(" ",t.bMT(2,2,e.errorMessage)," "),t.R7$(2),t.Y8G("ngIf",e.remainingAttempts>0&&e.remainingAttempts<e.LOGIN_CONFIG.MAX_LOGIN_ATTEMPTS)}}function y(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"auth.submit")))}function L(n,c){1&n&&(t.j41(0,"span",19),t.qSk(),t.j41(1,"svg",20),t.nrm(2,"circle",21)(3,"path",22),t.k0s(),t.joV(),t.j41(4,"span"),t.EFF(5),t.nI1(6,"translate"),t.k0s()()),2&n&&(t.R7$(5),t.JRh(t.bMT(6,1,"auth.processing")))}let C=(()=>{class n{formBuilder;authService;router;notificationService;loginForm;isLoading=!1;errorMessage=null;isAccountLocked=!1;remainingLockTime=0;remainingAttempts=0;LOGIN_CONFIG=m.r;lockCheckInterval;constructor(e,r,o,i){this.formBuilder=e,this.authService=r,this.router=o,this.notificationService=i,this.loginForm=this.formBuilder.group({username:["",a.k0.required],password:["",a.k0.required]})}ngOnInit(){this.remainingAttempts=this.authService.getRemainingAttempts(),this.checkLockStatus(),this.lockCheckInterval=setInterval(()=>this.checkLockStatus(),1e3)}ngOnDestroy(){this.lockCheckInterval&&clearInterval(this.lockCheckInterval)}checkLockStatus(){try{const e=this.authService.getRemainingLockTime();e>0?(this.isAccountLocked=!0,this.remainingLockTime=Math.ceil(e/6e4),this.errorMessage="T\xe0i kho\u1ea3n \u0111\xe3 b\u1ecb kho\xe1 do nh\u1eadp sai m\u1eadt kh\u1ea9u qu\xe1 nhi\u1ec1u l\u1ea7n"):(this.isAccountLocked=!1,this.remainingLockTime=0,this.remainingAttempts=this.authService.getRemainingAttempts(),"T\xe0i kho\u1ea3n \u0111\xe3 b\u1ecb kho\xe1 do nh\u1eadp sai m\u1eadt kh\u1ea9u qu\xe1 nhi\u1ec1u l\u1ea7n"===this.errorMessage&&(this.errorMessage=null))}catch(e){console.error("L\u1ed7i khi ki\u1ec3m tra tr\u1ea1ng th\xe1i kh\xf3a:",e)}}onSubmit(){var e=this;return(0,h.A)(function*(){if(e.checkLockStatus(),e.loginForm.invalid||e.isLoading||e.isAccountLocked)return;e.isLoading=!0,e.errorMessage=null;const{username:r,password:o}=e.loginForm.value;try{const i=yield e.authService.login(r,o);i.success?(e.router.navigate(["/"]),e.notificationService.success("\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng")):(i.isLocked?(e.isAccountLocked=!0,e.remainingLockTime=Math.ceil((i.remainingTime||0)/6e4),e.errorMessage="T\xe0i kho\u1ea3n \u0111\xe3 b\u1ecb kho\xe1 do nh\u1eadp sai m\u1eadt kh\u1ea9u qu\xe1 nhi\u1ec1u l\u1ea7n"):(void 0!==i.remainingAttempts&&(e.remainingAttempts=i.remainingAttempts,1===e.remainingAttempts&&e.notificationService.error(`C\xf2n 1 l\u1ea7n th\u1eed. N\u1ebfu nh\u1eadp sai, t\xe0i kho\u1ea3n s\u1ebd b\u1ecb kh\xf3a ${e.LOGIN_CONFIG.LOCK_DURATION/6e4} ph\xfat`)),e.errorMessage="admin"===r?"M\u1eadt kh\u1ea9u kh\xf4ng ch\xednh x\xe1c":"T\xean \u0111\u0103ng nh\u1eadp kh\xf4ng ch\xednh x\xe1c"),e.loginForm.get("password")?.reset())}catch(i){console.error("Login error:",i),e.errorMessage="\u0110\xe3 x\u1ea3y ra l\u1ed7i h\u1ec7 th\u1ed1ng. Vui l\xf2ng th\u1eed l\u1ea1i sau.",e.loginForm.get("password")?.reset()}finally{e.isLoading=!1}})()}static \u0275fac=function(r){return new(r||n)(t.rXU(a.ok),t.rXU(p.u),t.rXU(f.Ix),t.rXU(w))};static \u0275cmp=t.VBU({type:n,selectors:[["app-login"]],standalone:!0,features:[t.aNF],decls:27,vars:27,consts:[[1,"min-h-screen","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8","bg-gray-800/50","backdrop-blur-sm","p-8","rounded-2xl","border","border-gray-700/50"],[1,"flex","flex-col","items-center"],["src","https://pngimg.com/uploads/netflix/netflix_PNG10.png","alt","Logo",1,"w-16","h-16"],[1,"mt-4","text-center","text-3xl","font-bold","text-white","tracking-tight"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-4"],["for","username",1,"text-sm","font-medium","text-gray-300"],["id","username","name","username","type","text","formControlName","username",1,"mt-1","appearance-none","block","w-full","px-4","py-3","border","border-gray-700/50","placeholder-gray-400","bg-gray-900/50","backdrop-blur-sm","text-white","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","focus:bg-gray-800/50","transition-all","duration-200",3,"placeholder"],["for","password",1,"text-sm","font-medium","text-gray-300"],["id","password","name","password","type","password","formControlName","password",1,"mt-1","appearance-none","block","w-full","px-4","py-3","border","border-gray-700/50","placeholder-gray-400","bg-gray-900/50","backdrop-blur-sm","text-white","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:border-transparent","focus:bg-gray-800/50","transition-all","duration-200",3,"placeholder"],["class","bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-red-400 text-sm",4,"ngIf"],["type","submit",1,"w-full","flex","justify-center","py-3","px-4","border","border-transparent","text-base","font-medium","rounded-lg","text-white","bg-gradient-to-r","from-red-600","to-red-700","hover:from-red-700","hover:to-red-800","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","transition-all","duration-200","shadow-lg","shadow-red-500/20",3,"disabled"],[4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],[1,"bg-red-500/10","border","border-red-500/20","rounded-lg","p-4","text-red-400","text-sm"],[1,"mt-1"],["class","mt-2 text-red-300",4,"ngIf"],[1,"mt-2","text-red-300"],[1,"flex","items-center","space-x-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(r,o){if(1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.nrm(3,"img",3),t.j41(4,"h2",4),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.j41(7,"form",5),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(8,"div",6)(9,"div")(10,"label",7),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.nrm(13,"input",8),t.nI1(14,"translate"),t.k0s(),t.j41(15,"div")(16,"label",9),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.nrm(19,"input",10),t.nI1(20,"translate"),t.k0s()(),t.DNE(21,v,4,2,"div",11)(22,x,4,4,"div",11),t.j41(23,"div")(24,"button",12),t.DNE(25,y,3,3,"span",13)(26,L,7,3,"span",14),t.k0s()()()()()),2&r){let i,l;t.R7$(5),t.SpI(" ",t.bMT(6,17,"auth.login")," "),t.R7$(2),t.Y8G("formGroup",o.loginForm),t.R7$(4),t.JRh(t.bMT(12,19,"auth.username")),t.R7$(2),t.AVh("border-red-500",(null==(i=o.loginForm.get("username"))?null:i.invalid)&&(null==(i=o.loginForm.get("username"))?null:i.touched)),t.Y8G("placeholder",t.bMT(14,21,"auth.username")),t.R7$(4),t.JRh(t.bMT(18,23,"auth.password")),t.R7$(2),t.AVh("border-red-500",(null==(l=o.loginForm.get("password"))?null:l.invalid)&&(null==(l=o.loginForm.get("password"))?null:l.touched)),t.Y8G("placeholder",t.bMT(20,25,"auth.password")),t.R7$(2),t.Y8G("ngIf",o.isAccountLocked),t.R7$(),t.Y8G("ngIf",o.errorMessage&&!o.isAccountLocked),t.R7$(2),t.AVh("opacity-50",o.loginForm.invalid||o.isLoading||o.isAccountLocked),t.Y8G("disabled",o.loginForm.invalid||o.isLoading||o.isAccountLocked),t.R7$(),t.Y8G("ngIf",!o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading)}},dependencies:[d.MD,d.bT,a.YN,a.qT,a.me,a.BC,a.cb,a.X1,a.j4,a.JD,u.h,u.D9],styles:['[_nghost-%COMP%]{display:block;min-height:100vh;width:100%;background-size:cover;background-position:center;background-attachment:fixed}[_nghost-%COMP%]:before{content:"";position:absolute;inset:0;z-index:0;background:url(/assets/images/background.jpg) no-repeat center center;background-size:cover;filter:blur(10px);opacity:.1}form[_ngcontent-%COMP%]{position:relative;z-index:10}input[_ngcontent-%COMP%]:focus{border-color:transparent;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: rgb(168 85 247 / var(--tw-ring-opacity, 1));background:#1f1e27b3}input[_ngcontent-%COMP%]::placeholder{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.error-message[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);--tw-shadow-color: rgb(168 85 247 / .3);--tw-shadow: var(--tw-shadow-colored)}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.logo[_ngcontent-%COMP%]{display:flex;align-items:end;color:red}.logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-left:-16px;margin-bottom:1px}']})}return n})()}}]);