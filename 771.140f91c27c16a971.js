"use strict";(self.webpackChunkfilm_web=self.webpackChunkfilm_web||[]).push([[771],{7771:(E,b,s)=>{s.d(b,{z:()=>j});var e=s(177),m=s(6693),_=s(3551),P=s(2601),h=s(1413),x=s(6977),n=s(980),a=s(4909),t=s(4438),l=s(3498);const g=r=>["/phim",r];function v(r,f){if(1&r&&(t.j41(0,"span",30),t.EFF(1),t.k0s()),2&r){const o=t.XpG(2);t.R7$(),t.SpI(" ",o.movies[0].quality," ")}}function i(r,f){if(1&r&&(t.j41(0,"span",30),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r){const o=t.XpG(2);t.R7$(),t.Lme(" ",t.bMT(2,2,"common.episode")," ",o.movies[0].episode_current," ")}}function p(r,f){if(1&r&&(t.j41(0,"div",12)(1,"div",13),t.nrm(2,"img",14)(3,"div",15)(4,"div",16),t.k0s(),t.j41(5,"div",17)(6,"h1",18),t.EFF(7),t.k0s(),t.j41(8,"h2",19),t.EFF(9),t.k0s(),t.j41(10,"div",20)(11,"span",21),t.EFF(12),t.k0s(),t.DNE(13,v,2,1,"span",22)(14,i,3,4,"span",22),t.k0s(),t.j41(15,"div",23)(16,"a",24),t.qSk(),t.j41(17,"svg",25),t.nrm(18,"path",26),t.k0s(),t.EFF(19),t.nI1(20,"translate"),t.k0s(),t.joV(),t.j41(21,"button",27),t.qSk(),t.j41(22,"svg",28),t.nrm(23,"path",29),t.k0s(),t.EFF(24),t.nI1(25,"translate"),t.k0s()()()()),2&r){const o=t.XpG();t.R7$(2),t.Y8G("src",o.movies[0].thumb_url||o.movies[0].poster_url,t.B4B)("alt",o.movies[0].name),t.R7$(5),t.JRh(o.movies[0].name),t.R7$(2),t.JRh(o.movies[0].origin_name),t.R7$(3),t.JRh(o.movies[0].year),t.R7$(),t.Y8G("ngIf",o.movies[0].quality),t.R7$(),t.Y8G("ngIf",o.movies[0].episode_current),t.R7$(2),t.Y8G("routerLink",t.eq3(14,g,o.movies[0].slug)),t.R7$(3),t.SpI(" ",t.bMT(20,10,"common.watchNow")," "),t.R7$(5),t.SpI(" ",t.bMT(25,12,"common.more")," ")}}function c(r,f){if(1&r&&(t.j41(0,"div",31),t.EFF(1),t.k0s()),2&r){const o=t.XpG();t.R7$(),t.SpI(" ",o.error," ")}}function y(r,f){if(1&r&&(t.j41(0,"span",42),t.EFF(1),t.k0s()),2&r){const o=t.XpG().$implicit;t.R7$(),t.SpI(" ",o.quality," ")}}function M(r,f){if(1&r&&(t.j41(0,"div",43),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r){const o=t.XpG().$implicit;t.R7$(),t.Lme(" ",t.bMT(2,2,"common.episode")," ",o.episode_current," ")}}function R(r,f){if(1&r&&(t.j41(0,"div",32)(1,"div",33),t.nrm(2,"img",34),t.j41(3,"div",35)(4,"h3",36),t.EFF(5),t.k0s(),t.j41(6,"h4",37),t.EFF(7),t.k0s(),t.j41(8,"div",38)(9,"span",39),t.EFF(10),t.k0s(),t.DNE(11,y,2,1,"span",40),t.k0s()(),t.DNE(12,M,3,4,"div",41),t.k0s()()),2&r){const o=f.$implicit;t.Y8G("routerLink",t.eq3(8,g,o.slug)),t.R7$(2),t.Y8G("src",o.poster_url,t.B4B)("alt",o.name),t.R7$(3),t.JRh(o.name),t.R7$(2),t.JRh(o.origin_name),t.R7$(3),t.JRh(o.year),t.R7$(),t.Y8G("ngIf",o.quality),t.R7$(),t.Y8G("ngIf",o.episode_current)}}function I(r,f){1&r&&(t.j41(0,"div",44),t.nrm(1,"app-loading-spinner"),t.k0s())}function k(r,f){if(1&r){const o=t.RV6();t.j41(0,"app-pagination",45),t.bIt("pageChange",function(u){t.eBV(o);const $=t.XpG();return t.Njj($.onPageChange(u))}),t.k0s()}if(2&r){const o=t.XpG();t.Y8G("currentPage",o.currentPage)("totalPages",o.totalPages)}}function C(r,f){1&r&&(t.j41(0,"div",46),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&r&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.errors.noMoviesFound")," "))}let j=(()=>{class r{movieService;translate;movies=[];loading=!1;error="";currentPage=1;totalPages=1;pageTitle="Movies";destroy$=new h.B;constructor(o,d){this.movieService=o,this.translate=d}ngOnInit(){this.loadMovies(1)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMovies(o){this.loading||(this.loading=!0,this.error="",this.movies=[],this.getMovies(o).pipe((0,x.Q)(this.destroy$),(0,n.j)(()=>{this.loading=!1})).subscribe({next:d=>{this.movies=d?.items||[],d?.pagination?(this.currentPage=d.pagination.currentPage,this.totalPages=d.pagination.totalPages):(this.currentPage=1,this.totalPages=1),0===this.movies.length?(this.error="Kh\xf4ng t\xecm th\u1ea5y phim",this.translate.get("common.errors.noMoviesFound").subscribe(u=>{this.error=u})):this.error=""},error:d=>{console.error("Error loading movies:",d),this.movies=[],this.error="\u0110\xe3 x\u1ea3y ra l\u1ed7i khi t\u1ea3i phim",this.getErrorMessage(d).subscribe(u=>{this.error=u})}}))}getErrorMessage(o){return this.translate.get(404===o.status?"common.errors.noMoviesFound":0===o.status?"common.errors.connectionError":"common.errors.genericError")}onPageChange(o){o!==this.currentPage&&(this.loadMovies(o),window.scrollTo({top:0,behavior:"smooth"}))}static \u0275fac=function(d){return new(d||r)(t.rXU(l.W),t.rXU(a.c$))};static \u0275cmp=t.VBU({type:r,selectors:[["ng-component"]],standalone:!0,features:[t.aNF],decls:13,vars:7,consts:[[1,"min-h-screen","bg-black","text-white","pt-16","md:pt-20"],["class","relative w-full",4,"ngIf"],[1,"w-full","px-4","md:px-8","pb-16"],[1,"flex","justify-between","items-center","py-8"],[1,"text-2xl","md:text-3xl","font-bold"],["class","bg-red-900/20 border border-red-500 text-red-500 p-4 rounded-lg mb-6",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","xl:grid-cols-6","2xl:grid-cols-8","gap-3","md:gap-4"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],["class","py-16 text-center",4,"ngIf"],[1,"mt-8","flex","justify-center"],[3,"currentPage","totalPages","pageChange",4,"ngIf"],["class","text-center text-gray-400 py-16",4,"ngIf"],[1,"relative","w-full"],[1,"relative","w-full","h-[50vh]","md:h-[70vh]","overflow-hidden"],[1,"w-full","h-full","object-cover","object-center",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black","via-black/70","to-transparent"],[1,"absolute","inset-0","bg-gradient-to-r","from-black/90","to-transparent"],[1,"absolute","inset-0","flex","flex-col","justify-center","px-6","md:px-16","max-w-3xl"],[1,"text-3xl","md:text-5xl","font-bold","mb-2","md:mb-4","text-white"],[1,"text-lg","md:text-xl","text-gray-300","mb-2","md:mb-4"],[1,"flex","items-center","gap-3","mb-4"],[1,"text-sm","px-2","py-1","bg-red-600","text-white","rounded"],["class","text-sm px-2 py-1 bg-gray-700 text-white rounded",4,"ngIf"],[1,"flex","gap-3","mt-4"],[1,"flex","items-center","gap-2","px-6","py-2","bg-red-600","hover:bg-red-700","text-white","rounded-md","transition-colors",3,"routerLink"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5"],["d","M4 4l12 6-12 6V4z"],[1,"flex","items-center","gap-2","px-6","py-2","bg-gray-700","hover:bg-gray-600","text-white","rounded-md","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","px-2","py-1","bg-gray-700","text-white","rounded"],[1,"bg-red-900/20","border","border-red-500","text-red-500","p-4","rounded-lg","mb-6"],[1,"group","cursor-pointer",3,"routerLink"],[1,"relative","overflow-hidden","rounded-md","shadow-lg","transition-transform","duration-300","group-hover:scale-105","group-hover:z-10"],["loading","lazy",1,"w-full","aspect-[2/3]","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/90","via-black/50","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","flex","flex-col","justify-end","p-3"],[1,"text-white","text-sm","font-semibold","line-clamp-2"],[1,"text-gray-300","text-xs","line-clamp-1","mt-1"],[1,"flex","items-center","gap-2","mt-2"],[1,"text-xs","px-2","py-0.5","bg-red-600","text-white","rounded"],["class","text-xs px-2 py-0.5 bg-blue-600 text-white rounded",4,"ngIf"],["class","absolute top-2 right-2 px-2 py-0.5 bg-red-600 text-white rounded text-xs",4,"ngIf"],[1,"text-xs","px-2","py-0.5","bg-blue-600","text-white","rounded"],[1,"absolute","top-2","right-2","px-2","py-0.5","bg-red-600","text-white","rounded","text-xs"],[1,"py-16","text-center"],[3,"pageChange","currentPage","totalPages"],[1,"text-center","text-gray-400","py-16"]],template:function(d,u){1&d&&(t.j41(0,"div",0),t.DNE(1,p,26,16,"div",1),t.j41(2,"div",2)(3,"div",3)(4,"h2",4),t.EFF(5),t.k0s()(),t.DNE(6,c,2,1,"div",5),t.j41(7,"div",6),t.DNE(8,R,13,10,"div",7),t.k0s(),t.DNE(9,I,2,0,"div",8),t.j41(10,"div",9),t.DNE(11,k,1,2,"app-pagination",10),t.k0s(),t.DNE(12,C,3,3,"div",11),t.k0s()()),2&d&&(t.R7$(),t.Y8G("ngIf",!u.loading&&!u.error&&u.movies.length>0),t.R7$(4),t.JRh(u.pageTitle),t.R7$(),t.Y8G("ngIf",u.error),t.R7$(2),t.Y8G("ngForOf",u.movies),t.R7$(),t.Y8G("ngIf",u.loading),t.R7$(2),t.Y8G("ngIf",!u.loading&&!u.error&&u.movies.length>0),t.R7$(),t.Y8G("ngIf",!u.loading&&!u.error&&0===u.movies.length))},dependencies:[e.MD,e.Sq,e.bT,m.iI,m.Wk,_.N,P.e,a.h,a.D9],encapsulation:2})}return r})()},3551:(E,b,s)=>{s.d(b,{N:()=>m});var e=s(4438);let m=(()=>{class _{static \u0275fac=function(x){return new(x||_)};static \u0275cmp=e.VBU({type:_,selectors:[["app-loading-spinner"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"flex","justify-center","items-center","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-accent"]],template:function(x,n){1&x&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.k0s())},encapsulation:2})}return _})()},2601:(E,b,s)=>{s.d(b,{e:()=>l});var e=s(4438),m=s(177),_=s(4909);function P(g,v){if(1&g){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(i);const c=e.XpG(2);return e.Njj(c.onPageChange(1))}),e.EFF(1," 1 "),e.k0s()}}function h(g,v){1&g&&(e.j41(0,"span",8),e.EFF(1,"..."),e.k0s())}function x(g,v){if(1&g){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){const c=e.eBV(i).$implicit,y=e.XpG(2);return e.Njj(y.onPageChange(c))}),e.EFF(1),e.k0s()}if(2&g){const i=v.$implicit,p=e.XpG(2);e.AVh("bg-red-600",i===p.currentPage),e.R7$(),e.SpI(" ",i," ")}}function n(g,v){1&g&&(e.j41(0,"span",8),e.EFF(1,"..."),e.k0s())}function a(g,v){if(1&g){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(i);const c=e.XpG(2);return e.Njj(c.onPageChange(c.totalPages))}),e.EFF(1),e.k0s()}if(2&g){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.totalPages," ")}}function t(g,v){if(1&g){const i=e.RV6();e.j41(0,"div",1)(1,"button",2),e.bIt("click",function(){e.eBV(i);const c=e.XpG();return e.Njj(c.onPageChange(c.currentPage-1))}),e.EFF(2," \u2190 "),e.k0s(),e.DNE(3,P,2,0,"button",3)(4,h,2,0,"span",4)(5,x,2,3,"button",5)(6,n,2,0,"span",4)(7,a,2,1,"button",3),e.j41(8,"button",2),e.bIt("click",function(){e.eBV(i);const c=e.XpG();return e.Njj(c.onPageChange(c.currentPage+1))}),e.EFF(9," \u2192 "),e.k0s(),e.j41(10,"span",6),e.EFF(11),e.nI1(12,"translate"),e.nI1(13,"translate"),e.k0s()()}if(2&g){const i=e.XpG();e.R7$(),e.Y8G("disabled",1===i.currentPage),e.R7$(2),e.Y8G("ngIf",i.pages[0]>1),e.R7$(),e.Y8G("ngIf",i.pages[0]>2),e.R7$(),e.Y8G("ngForOf",i.pages),e.R7$(),e.Y8G("ngIf",i.pages[i.pages.length-1]<i.totalPages-1),e.R7$(),e.Y8G("ngIf",i.pages[i.pages.length-1]<i.totalPages),e.R7$(),e.Y8G("disabled",i.currentPage===i.totalPages),e.R7$(3),e.LHq(" ",e.bMT(12,11,"common.pagination.page")," ",i.currentPage," ",e.bMT(13,13,"common.pagination.of")," ",i.totalPages," ")}}let l=(()=>{class g{currentPage=1;totalPages=1;pageChange=new e.bkB;pages=[];ngOnChanges(i){(i.currentPage||i.totalPages)&&this.updatePagination(),this.updatePagination()}updatePagination(){let p=Math.max(1,this.currentPage-Math.floor(2.5)),c=Math.min(this.totalPages,p+5-1);c-p+1<5&&(p=Math.max(1,c-5+1)),this.pages=Array.from({length:c-p+1},(y,M)=>p+M)}onPageChange(i){i>=1&&i<=this.totalPages&&i!==this.currentPage&&this.pageChange.emit(i)}static \u0275fac=function(p){return new(p||g)};static \u0275cmp=e.VBU({type:g,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[e.OA$,e.aNF],decls:1,vars:1,consts:[["class","flex items-center justify-center space-x-2 py-8",4,"ngIf"],[1,"flex","items-center","justify-center","space-x-2","py-8"],[1,"px-3","py-1","rounded","bg-gray-800","text-white","hover:bg-gray-700","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","px-3 py-1 rounded bg-gray-800 text-white hover:bg-gray-700",3,"click",4,"ngIf"],["class","text-gray-600",4,"ngIf"],["class","px-3 py-1 rounded bg-gray-800 text-white hover:bg-gray-700",3,"bg-red-600","click",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-400","ml-4"],[1,"px-3","py-1","rounded","bg-gray-800","text-white","hover:bg-gray-700",3,"click"],[1,"text-gray-600"]],template:function(p,c){1&p&&e.DNE(0,t,14,15,"div",0),2&p&&e.Y8G("ngIf",c.totalPages>0)},dependencies:[m.MD,m.Sq,m.bT,_.h,_.D9],styles:["button[_ngcontent-%COMP%]{transition:all .2s ease;min-width:2.5rem;height:2.5rem;display:inline-flex;align-items:center;justify-content:center;font-weight:500}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}button[_ngcontent-%COMP%]:not(:disabled):hover{background:#e50914;transform:scale(1.05)}button.bg-red-600[_ngcontent-%COMP%]{background:#e50914}button.bg-red-600[_ngcontent-%COMP%]:hover{background:#b30710}"]})}return g})()},3498:(E,b,s)=>{s.d(b,{W:()=>P});var e=s(6354),m=s(4438),_=s(1626);let P=(()=>{class h{http;baseUrl="https://phimapi.com";constructor(n){this.http=n}imageBaseUrl="https://phimimg.com";addImageBaseUrl(n){return n&&(n.startsWith("http")?n:`${this.imageBaseUrl}/${n}`)}transformResponse(n,a){try{if(a){const t=n;return t.data?.items?{items:t.data.items.map(l=>({...l,poster_url:this.addImageBaseUrl(l.poster_url),thumb_url:this.addImageBaseUrl(l.thumb_url)})),pagination:t.data.params.pagination}:{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}{const t=n;return t.items?{items:t.items.map(l=>({...l,poster_url:this.addImageBaseUrl(l.poster_url),thumb_url:this.addImageBaseUrl(l.thumb_url)})),pagination:t.pagination}:{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}}catch(t){return console.error("Error transforming response:",t),{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}}isV1Endpoint(n){return n.includes("/v1/api/")}makeRequest(n,a={}){const t=`${this.baseUrl}${n}`,l=this.isV1Endpoint(n),g={...a};return this.http.get(t,{params:g}).pipe((0,e.T)(v=>{try{return this.transformResponse(v,l)}catch(i){return console.error(`Error processing response from ${n}:`,i),{items:[],pagination:{currentPage:1,totalPages:1,totalItems:0,totalItemsPerPage:0}}}}))}getLatestMovies(n=1){return this.makeRequest("/danh-sach/phim-moi-cap-nhat",{page:n.toString()})}getMoviesByCategory(n,a=1){return this.makeRequest(`/v1/api/the-loai/${n}`,{page:a.toString()})}getMoviesByCountry(n,a=1){return this.makeRequest(`/v1/api/quoc-gia/${n}`,{page:a.toString()})}getMoviesByCategoryAndCountry(n,a,t=1){return this.makeRequest(`/v1/api/the-loai/${n}?country=${a}`,{page:t.toString()})}getMovieDetails(n){return this.http.get(`${this.baseUrl}/phim/${n}`).pipe((0,e.T)(t=>{try{return t.movie?{...t,movie:{...t.movie,poster_url:this.addImageBaseUrl(t.movie.poster_url),thumb_url:this.addImageBaseUrl(t.movie.thumb_url)}}:(console.warn("Movie details not found in response:",t),{status:!1,msg:"Movie not found",movie:{_id:"",name:"Movie not found",slug:n,origin_name:"",poster_url:"",thumb_url:"",year:0,modified:{time:""}},episodes:[]})}catch(l){return console.error("Error processing movie details:",l),{status:!1,msg:"Error processing movie details",movie:{_id:"",name:"Error loading movie",slug:n,origin_name:"",poster_url:"",thumb_url:"",year:0,modified:{time:""}},episodes:[]}}}))}getTrendingMovies(n=1){return this.makeRequest("/v1/api/danh-sach/tv-shows",{page:n.toString()})}getSingleMovies(n=1){return this.makeRequest("/v1/api/danh-sach/phim-le",{page:n.toString()})}getSeriesMovies(n=1){return this.makeRequest("/v1/api/danh-sach/phim-bo",{page:n.toString()})}getAnimeMovies(n=1){return this.makeRequest("/v1/api/danh-sach/hoat-hinh",{page:n.toString()})}getMoviesByYear(n,a=1,t={}){const l={page:a.toString()};return t.sort_field&&(l.sort_field=t.sort_field),t.sort_type&&(l.sort_type=t.sort_type),t.sort_lang&&(l.sort_lang=t.sort_lang),t.category&&(l.category=t.category),t.country&&(l.country=t.country),t.limit&&(l.limit=t.limit.toString()),this.makeRequest(`/v1/api/nam/${n}`,l)}getCategories(){return this.http.get(`${this.baseUrl}/the-loai`)}getCountries(){return this.http.get(`${this.baseUrl}/quoc-gia`)}searchMovies(n){const a={};return n.keyword&&""!==n.keyword.trim()&&(a.keyword=n.keyword),n.page&&(a.page=n.page.toString()),n.sort_field&&(a.sort_field=n.sort_field),n.sort_type&&(a.sort_type=n.sort_type),n.sort_lang&&(a.sort_lang=n.sort_lang),n.category&&(a.category=n.category),n.country&&(a.country=n.country),n.year&&(a.year=n.year.toString()),n.limit&&(a.limit=n.limit.toString()),this.makeRequest("/v1/api/tim-kiem",a)}static \u0275fac=function(a){return new(a||h)(m.KVO(_.Qq))};static \u0275prov=m.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);