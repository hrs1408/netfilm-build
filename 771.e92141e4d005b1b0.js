"use strict";(self.webpackChunkfilm_web=self.webpackChunkfilm_web||[]).push([[771],{7771:(y,v,l)=>{l.d(v,{z:()=>C});var e=l(177),p=l(303),m=l(3551),x=l(2601),_=l(1413),f=l(6977),n=l(980),t=l(4438),o=l(3498),r=l(487);const h=s=>["/phim",s];function i(s,b){if(1&s&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&s){const a=t.XpG();t.R7$(),t.SpI(" ",a.error," ")}}function c(s,b){if(1&s&&(t.j41(0,"div",27),t.EFF(1),t.k0s()),2&s){const a=t.XpG().$implicit;t.R7$(),t.SpI(" T\u1eadp ",a.episode_current," ")}}function g(s,b){if(1&s&&(t.j41(0,"span",28),t.EFF(1),t.k0s()),2&s){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",a.quality," ")}}function P(s,b){if(1&s&&(t.j41(0,"div",10)(1,"div",11)(2,"div",12),t.nrm(3,"img",13)(4,"div",14),t.j41(5,"div",15)(6,"span",16),t.qSk(),t.j41(7,"svg",17),t.nrm(8,"path",18)(9,"path",19),t.k0s()()(),t.DNE(10,c,2,1,"div",20),t.k0s(),t.joV(),t.j41(11,"div",21)(12,"h3",22),t.EFF(13),t.k0s(),t.j41(14,"h4",23),t.EFF(15),t.k0s(),t.j41(16,"div",24)(17,"span",25),t.EFF(18),t.k0s(),t.DNE(19,g,2,1,"span",26),t.k0s()()()()),2&s){const a=b.$implicit;t.Y8G("routerLink",t.eq3(8,h,a.slug)),t.R7$(3),t.Y8G("src",a.poster_url,t.B4B)("alt",a.name),t.R7$(7),t.Y8G("ngIf",a.episode_current),t.R7$(3),t.JRh(a.name),t.R7$(2),t.JRh(a.origin_name),t.R7$(3),t.SpI(" ",a.year," "),t.R7$(),t.Y8G("ngIf",a.quality)}}function k(s,b){1&s&&(t.j41(0,"div",29),t.nrm(1,"app-loading-spinner"),t.k0s())}function E(s,b){1&s&&(t.j41(0,"div",30),t.qSk(),t.j41(1,"svg",31),t.nrm(2,"path",32),t.k0s(),t.joV(),t.j41(3,"p",33),t.EFF(4,"No movies found"),t.k0s(),t.j41(5,"p",34),t.EFF(6,"Try adjusting your search or filters"),t.k0s()())}function M(s,b){if(1&s){const a=t.RV6();t.j41(0,"div",35)(1,"app-pagination",36),t.bIt("pageChange",function(u){t.eBV(a);const R=t.XpG();return t.Njj(R.onPageChange(u))}),t.k0s()()}if(2&s){const a=t.XpG();t.R7$(),t.Y8G("currentPage",a.currentPage)("totalPages",a.totalPages)}}let C=(()=>{class s{movieService;themeService;movies=[];loading=!1;error="";currentPage=1;totalPages=1;pageTitle="Movies";destroy$=new _.B;isDarkMode=!1;constructor(a,d){this.movieService=a,this.themeService=d,this.themeService.isDarkMode$.pipe((0,f.Q)(this.destroy$)).subscribe(u=>{this.isDarkMode=u})}ngOnInit(){this.loadMovies(1)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMovies(a){this.loading||(this.loading=!0,this.error="",this.movies=[],this.getMovies(a).pipe((0,f.Q)(this.destroy$),(0,n.j)(()=>{this.loading=!1})).subscribe({next:d=>{if(!d?.items)return this.movies=[],void(this.error="No movies found.");this.movies=d.items,d.pagination?(this.currentPage=d.pagination.currentPage,this.totalPages=d.pagination.totalPages):(this.currentPage=1,this.totalPages=1),0===this.movies.length&&(this.error="No movies found.")},error:d=>{this.error=this.getErrorMessage(d),console.error("Error loading movies:",d),this.movies=[]}}))}getErrorMessage(a){return 404===a.status?"No movies found.":0===a.status?"Unable to connect to server. Please check your internet connection.":a.message||"Failed to load movies. Please try again later."}onPageChange(a){a!==this.currentPage&&(this.loadMovies(a),window.scrollTo({top:0,behavior:"smooth"}))}static \u0275fac=function(d){return new(d||s)(t.rXU(o.W),t.rXU(r.F))};static \u0275cmp=t.VBU({type:s,selectors:[["ng-component"]],standalone:!0,features:[t.aNF],decls:10,vars:6,consts:[[1,"min-h-screen","bg-primary-light","dark:bg-primary-dark","text-text-primary-light","dark:text-text-primary-dark"],[1,"container","mx-auto","px-4"],[1,"text-3xl","font-bold","pb-6"],["class","bg-red-500/10 border border-red-500 text-red-500 p-4 rounded-lg mb-6",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","xl:grid-cols-6","gap-4","md:gap-6"],["class","group cursor-pointer",3,"routerLink",4,"ngFor","ngForOf"],["class","py-12 text-center",4,"ngIf"],["class","flex flex-col items-center justify-center py-12 text-text-secondary-light dark:text-text-secondary-dark",4,"ngIf"],["class","py-8",4,"ngIf"],[1,"bg-red-500/10","border","border-red-500","text-red-500","p-4","rounded-lg","mb-6"],[1,"group","cursor-pointer",3,"routerLink"],[1,"relative","overflow-hidden","rounded-lg","shadow-lg","bg-secondary-light","dark:bg-secondary-dark","transform","transition-all","duration-300","ease-out","hover:scale-105","hover:shadow-2xl","hover:shadow-red-500/20"],[1,"relative","aspect-[2/3]"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black","via-transparent","to-transparent","opacity-50"],[1,"absolute","inset-0","bg-black/60","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","flex","items-center","justify-center"],[1,"bg-red-500","rounded-full","p-3","transform","scale-0","group-hover:scale-100","transition-transform","duration-300","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["class","absolute top-2 right-2 px-2 py-1 bg-red-500 text-white rounded-full text-xs font-medium\n                                    shadow-lg backdrop-blur-sm bg-opacity-90",4,"ngIf"],[1,"p-3","space-y-2"],[1,"text-sm","font-semibold","line-clamp-1","text-text-primary-light","dark:text-text-primary-dark","group-hover:text-red-500","transition-colors","duration-300"],[1,"text-xs","text-text-secondary-light","dark:text-text-secondary-dark","line-clamp-1"],[1,"flex","items-center","gap-2"],[1,"text-xs","px-2","py-0.5","bg-red-500/10","dark:bg-red-500/20","text-red-600","dark:text-red-500","rounded-full"],["class","text-xs px-2 py-0.5 bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-500 rounded-full",4,"ngIf"],[1,"absolute","top-2","right-2","px-2","py-1","bg-red-500","text-white","rounded-full","text-xs","font-medium","shadow-lg","backdrop-blur-sm","bg-opacity-90"],[1,"text-xs","px-2","py-0.5","bg-blue-500/10","dark:bg-blue-500/20","text-blue-600","dark:text-blue-500","rounded-full"],[1,"py-12","text-center"],[1,"flex","flex-col","items-center","justify-center","py-12","text-text-secondary-light","dark:text-text-secondary-dark"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-16","w-16","mb-4","opacity-50"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M7 4v16m10-16v16M3 8h18M3 16h18"],[1,"text-lg","font-medium"],[1,"text-sm","mt-2"],[1,"py-8"],[3,"pageChange","currentPage","totalPages"]],template:function(d,u){1&d&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3),t.k0s(),t.DNE(4,i,2,1,"div",3),t.j41(5,"div",4),t.DNE(6,P,20,10,"div",5),t.k0s(),t.DNE(7,k,2,0,"div",6)(8,E,7,0,"div",7)(9,M,2,2,"div",8),t.k0s()()),2&d&&(t.R7$(3),t.JRh(u.pageTitle),t.R7$(),t.Y8G("ngIf",u.error),t.R7$(2),t.Y8G("ngForOf",u.movies),t.R7$(),t.Y8G("ngIf",u.loading),t.R7$(),t.Y8G("ngIf",!u.loading&&!u.error&&0===u.movies.length),t.R7$(),t.Y8G("ngIf",!u.loading&&!u.error&&u.movies.length>0))},dependencies:[e.MD,e.Sq,e.bT,p.iI,p.Wk,m.N,x.e],encapsulation:2})}return s})()},3551:(y,v,l)=>{l.d(v,{N:()=>p});var e=l(4438);let p=(()=>{class m{static \u0275fac=function(f){return new(f||m)};static \u0275cmp=e.VBU({type:m,selectors:[["app-loading-spinner"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"flex","justify-center","items-center","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-accent"]],template:function(f,n){1&f&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.k0s())},encapsulation:2})}return m})()},2601:(y,v,l)=>{l.d(v,{e:()=>o});var e=l(4438),p=l(177);function m(r,h){if(1&r){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(i);const g=e.XpG(2);return e.Njj(g.onPageChange(1))}),e.EFF(1," 1 "),e.k0s()}}function x(r,h){1&r&&(e.j41(0,"span",8),e.EFF(1,"..."),e.k0s())}function _(r,h){if(1&r){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){const g=e.eBV(i).$implicit,P=e.XpG(2);return e.Njj(P.onPageChange(g))}),e.EFF(1),e.k0s()}if(2&r){const i=h.$implicit,c=e.XpG(2);e.AVh("bg-red-600",i===c.currentPage),e.R7$(),e.SpI(" ",i," ")}}function f(r,h){1&r&&(e.j41(0,"span",8),e.EFF(1,"..."),e.k0s())}function n(r,h){if(1&r){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(i);const g=e.XpG(2);return e.Njj(g.onPageChange(g.totalPages))}),e.EFF(1),e.k0s()}if(2&r){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.totalPages," ")}}function t(r,h){if(1&r){const i=e.RV6();e.j41(0,"div",1)(1,"button",2),e.bIt("click",function(){e.eBV(i);const g=e.XpG();return e.Njj(g.onPageChange(g.currentPage-1))}),e.EFF(2," \u2190 "),e.k0s(),e.DNE(3,m,2,0,"button",3)(4,x,2,0,"span",4)(5,_,2,3,"button",5)(6,f,2,0,"span",4)(7,n,2,1,"button",3),e.j41(8,"button",2),e.bIt("click",function(){e.eBV(i);const g=e.XpG();return e.Njj(g.onPageChange(g.currentPage+1))}),e.EFF(9," \u2192 "),e.k0s(),e.j41(10,"span",6),e.EFF(11),e.k0s()()}if(2&r){const i=e.XpG();e.R7$(),e.Y8G("disabled",1===i.currentPage),e.R7$(2),e.Y8G("ngIf",i.pages[0]>1),e.R7$(),e.Y8G("ngIf",i.pages[0]>2),e.R7$(),e.Y8G("ngForOf",i.pages),e.R7$(),e.Y8G("ngIf",i.pages[i.pages.length-1]<i.totalPages-1),e.R7$(),e.Y8G("ngIf",i.pages[i.pages.length-1]<i.totalPages),e.R7$(),e.Y8G("disabled",i.currentPage===i.totalPages),e.R7$(3),e.Lme(" Page ",i.currentPage," of ",i.totalPages," ")}}let o=(()=>{class r{currentPage=1;totalPages=1;pageChange=new e.bkB;pages=[];ngOnChanges(i){(i.currentPage||i.totalPages)&&this.updatePagination(),this.updatePagination()}updatePagination(){let c=Math.max(1,this.currentPage-Math.floor(2.5)),g=Math.min(this.totalPages,c+5-1);g-c+1<5&&(c=Math.max(1,g-5+1)),this.pages=Array.from({length:g-c+1},(P,k)=>c+k)}onPageChange(i){i>=1&&i<=this.totalPages&&i!==this.currentPage&&this.pageChange.emit(i)}static \u0275fac=function(c){return new(c||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[e.OA$,e.aNF],decls:1,vars:1,consts:[["class","flex items-center justify-center space-x-2 py-8",4,"ngIf"],[1,"flex","items-center","justify-center","space-x-2","py-8"],[1,"px-3","py-1","rounded","bg-gray-800","text-white","hover:bg-gray-700","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","px-3 py-1 rounded bg-gray-800 text-white hover:bg-gray-700",3,"click",4,"ngIf"],["class","text-gray-600",4,"ngIf"],["class","px-3 py-1 rounded bg-gray-800 text-white hover:bg-gray-700",3,"bg-red-600","click",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-400","ml-4"],[1,"px-3","py-1","rounded","bg-gray-800","text-white","hover:bg-gray-700",3,"click"],[1,"text-gray-600"]],template:function(c,g){1&c&&e.DNE(0,t,12,9,"div",0),2&c&&e.Y8G("ngIf",g.totalPages>0)},dependencies:[p.MD,p.Sq,p.bT],styles:["button[_ngcontent-%COMP%]{transition:all .2s ease;min-width:2.5rem;height:2.5rem;display:inline-flex;align-items:center;justify-content:center;font-weight:500}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}button[_ngcontent-%COMP%]:not(:disabled):hover{background:#e50914;transform:scale(1.05)}button.bg-red-600[_ngcontent-%COMP%]{background:#e50914}button.bg-red-600[_ngcontent-%COMP%]:hover{background:#b30710}"]})}return r})()},3498:(y,v,l)=>{l.d(v,{W:()=>x});var e=l(6354),p=l(4438),m=l(1626);let x=(()=>{class _{http;baseUrl="https://phimapi.com";constructor(n){this.http=n}imageBaseUrl="https://phimimg.com";addImageBaseUrl(n){return n&&(n.startsWith("http")?n:`${this.imageBaseUrl}/${n}`)}transformResponse(n,t){if(t){const o=n;if("success"!==o.status)throw new Error(o.msg||"API returned unsuccessful status");if(!o.data?.items)throw new Error("No items found in response");return{items:o.data.items.map(r=>({...r,poster_url:this.addImageBaseUrl(r.poster_url),thumb_url:this.addImageBaseUrl(r.thumb_url)})),pagination:o.data.params.pagination}}{const o=n;if(!o.status)throw new Error("API returned unsuccessful status");if(!o.items)throw new Error("No items found in response");return{items:o.items.map(r=>({...r,poster_url:this.addImageBaseUrl(r.poster_url),thumb_url:this.addImageBaseUrl(r.thumb_url)})),pagination:o.pagination}}}isV1Endpoint(n){return n.includes("/v1/api/")}makeRequest(n,t={}){const o=`${this.baseUrl}${n}`,r=this.isV1Endpoint(n),h={...t};return this.http.get(o,{params:h}).pipe((0,e.T)(i=>this.transformResponse(i,r)))}getLatestMovies(n=1){return this.makeRequest("/danh-sach/phim-moi-cap-nhat",{page:n.toString()})}getMoviesByCategory(n,t=1){return this.makeRequest(`/danh-sach/the-loai/${n}`,{page:t.toString()})}getMoviesByCountry(n,t=1){return this.makeRequest(`/v1/api/danh-sach/quoc-gia/${n}`,{page:t.toString()})}getMovieDetails(n){return this.http.get(`${this.baseUrl}/phim/${n}`).pipe((0,e.T)(o=>{if(!o.status)throw new Error(o.msg||"Failed to fetch movie details");return{...o,movie:{...o.movie,poster_url:this.addImageBaseUrl(o.movie.poster_url),thumb_url:this.addImageBaseUrl(o.movie.thumb_url)}}}))}getTrendingMovies(n=1){return this.makeRequest("/v1/api/danh-sach/trending",{page:n.toString()})}getSingleMovies(n=1){return this.makeRequest("/v1/api/danh-sach/phim-le",{page:n.toString()})}getSeriesMovies(n=1){return this.makeRequest("/v1/api/danh-sach/phim-bo",{page:n.toString()})}getAnimeMovies(n=1){return this.makeRequest("/v1/api/danh-sach/hoat-hinh",{page:n.toString()})}getCategories(){return this.http.get(`${this.baseUrl}/the-loai`)}getCountries(){return this.http.get(`${this.baseUrl}/quoc-gia`)}searchMovies(n){const o={};return n.keyword&&(o.keyword=n.keyword),n.page&&(o.page=n.page.toString()),n.sort_field&&(o.sort_field=n.sort_field),n.sort_type&&(o.sort_type=n.sort_type),n.sort_lang&&(o.sort_lang=n.sort_lang),n.category&&(o.category=n.category),n.country&&(o.country=n.country),n.year&&(o.year=n.year.toString()),n.limit&&(o.limit=n.limit.toString()),this.makeRequest("/v1/api/tim-kiem",o)}static \u0275fac=function(t){return new(t||_)(p.KVO(m.Qq))};static \u0275prov=p.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);