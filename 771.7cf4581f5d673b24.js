"use strict";(self.webpackChunkfilm_web=self.webpackChunkfilm_web||[]).push([[771],{7771:(E,v,r)=>{r.d(v,{z:()=>R});var e=r(177),d=r(8094),m=r(3551),x=r(2601),h=r(1413),P=r(6977),n=r(980),g=r(7408),t=r(4438),_=r(3498);const s=o=>["/phim",o];function f(o,b){1&o&&(t.j41(0,"div",9),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.errors.genericError")," "))}function i(o,b){if(1&o&&(t.j41(0,"span",20),t.EFF(1),t.k0s()),2&o){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",a.quality," ")}}function c(o,b){if(1&o&&(t.j41(0,"div",21),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const a=t.XpG().$implicit;t.R7$(),t.Lme(" ",t.bMT(2,2,"common.episode")," ",a.episode_current," ")}}function l(o,b){if(1&o&&(t.j41(0,"div",10)(1,"div",11),t.nrm(2,"img",12),t.j41(3,"div",13)(4,"h3",14),t.EFF(5),t.k0s(),t.j41(6,"h4",15),t.EFF(7),t.k0s(),t.j41(8,"div",16)(9,"span",17),t.EFF(10),t.k0s(),t.DNE(11,i,2,1,"span",18),t.k0s()(),t.DNE(12,c,3,4,"div",19),t.k0s()()),2&o){const a=b.$implicit;t.Y8G("routerLink",t.eq3(8,s,a.slug)),t.R7$(2),t.Y8G("src",a.poster_url,t.B4B)("alt",a.name),t.R7$(3),t.JRh(a.name),t.R7$(2),t.JRh(a.origin_name),t.R7$(3),t.JRh(a.year),t.R7$(),t.Y8G("ngIf",a.quality),t.R7$(),t.Y8G("ngIf",a.episode_current)}}function y(o,b){1&o&&(t.j41(0,"div",22),t.nrm(1,"app-loading-spinner"),t.k0s())}function M(o,b){if(1&o){const a=t.RV6();t.j41(0,"app-pagination",23),t.bIt("pageChange",function(p){t.eBV(a);const I=t.XpG();return t.Njj(I.onPageChange(p))}),t.k0s()}if(2&o){const a=t.XpG();t.Y8G("currentPage",a.currentPage)("totalPages",a.totalPages)}}function C(o,b){1&o&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"common.errors.noMoviesFound")," "))}let R=(()=>{class o{movieService;translate;movies=[];loading=!1;error="";currentPage=1;totalPages=1;pageTitle="Movies";destroy$=new h.B;constructor(a,u){this.movieService=a,this.translate=u}ngOnInit(){this.loadMovies(1)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMovies(a){this.loading||(this.loading=!0,this.error="",this.movies=[],this.getMovies(a).pipe((0,P.Q)(this.destroy$),(0,n.j)(()=>{this.loading=!1})).subscribe({next:u=>{if(!u?.items)return this.movies=[],void this.translate.get("common.errors.noMoviesFound").subscribe(p=>{this.error=p});this.movies=u.items,u.pagination?(this.currentPage=u.pagination.currentPage,this.totalPages=u.pagination.totalPages):(this.currentPage=1,this.totalPages=1),0===this.movies.length&&this.translate.get("common.errors.noMoviesFound").subscribe(p=>{this.error=p})},error:u=>{this.getErrorMessage(u).subscribe(p=>{this.error=p}),console.error("Error loading movies:",u),this.movies=[]}}))}getErrorMessage(a){return this.translate.get(404===a.status?"common.errors.noMoviesFound":0===a.status?"common.errors.connectionError":"common.errors.genericError")}onPageChange(a){a!==this.currentPage&&(this.loadMovies(a),window.scrollTo({top:0,behavior:"smooth"}))}static \u0275fac=function(u){return new(u||o)(t.rXU(_.W),t.rXU(g.c$))};static \u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],standalone:!0,features:[t.aNF],decls:10,vars:6,consts:[[1,"min-h-screen","bg-gray-50","dark:bg-[#141414]","text-gray-900","dark:text-white"],[1,"container","mx-auto","px-4"],[1,"text-3xl","font-bold","py-8"],["class","bg-red-50 dark:bg-red-500/10 border border-red-500 text-red-600 dark:text-red-500 p-4 rounded-lg mb-6",4,"ngIf"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","gap-4"],["class","group cursor-pointer transition-transform hover:scale-105",3,"routerLink",4,"ngFor","ngForOf"],["class","py-8 text-center",4,"ngIf"],[3,"currentPage","totalPages","pageChange",4,"ngIf"],["class","text-center text-gray-600 dark:text-gray-400 py-8",4,"ngIf"],[1,"bg-red-50","dark:bg-red-500/10","border","border-red-500","text-red-600","dark:text-red-500","p-4","rounded-lg","mb-6"],[1,"group","cursor-pointer","transition-transform","hover:scale-105",3,"routerLink"],[1,"relative","overflow-hidden","rounded-lg","shadow-lg","bg-white","dark:bg-gray-800"],["loading","lazy",1,"w-full","aspect-[2/3]","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/90","via-black/50","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","flex","flex-col","justify-end","p-3"],[1,"text-white","text-sm","font-semibold","line-clamp-2"],[1,"text-gray-300","text-xs","line-clamp-1","mt-1"],[1,"flex","items-center","gap-2","mt-2"],[1,"text-xs","px-2","py-0.5","bg-red-600","text-white","rounded"],["class","text-xs px-2 py-0.5 bg-blue-600 text-white rounded",4,"ngIf"],["class","absolute top-2 right-2 px-2 py-0.5 bg-red-600 text-white rounded text-xs",4,"ngIf"],[1,"text-xs","px-2","py-0.5","bg-blue-600","text-white","rounded"],[1,"absolute","top-2","right-2","px-2","py-0.5","bg-red-600","text-white","rounded","text-xs"],[1,"py-8","text-center"],[3,"pageChange","currentPage","totalPages"],[1,"text-center","text-gray-600","dark:text-gray-400","py-8"]],template:function(u,p){1&u&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3),t.k0s(),t.DNE(4,f,3,3,"div",3),t.j41(5,"div",4),t.DNE(6,l,13,10,"div",5),t.k0s(),t.DNE(7,y,2,0,"div",6)(8,M,1,2,"app-pagination",7)(9,C,3,3,"div",8),t.k0s()()),2&u&&(t.R7$(3),t.JRh(p.pageTitle),t.R7$(),t.Y8G("ngIf",p.error),t.R7$(2),t.Y8G("ngForOf",p.movies),t.R7$(),t.Y8G("ngIf",p.loading),t.R7$(),t.Y8G("ngIf",!p.loading&&!p.error&&p.movies.length>0),t.R7$(),t.Y8G("ngIf",!p.loading&&!p.error&&0===p.movies.length))},dependencies:[e.MD,e.Sq,e.bT,d.iI,d.Wk,m.N,x.e,g.h,g.D9],encapsulation:2})}return o})()},3551:(E,v,r)=>{r.d(v,{N:()=>d});var e=r(4438);let d=(()=>{class m{static \u0275fac=function(P){return new(P||m)};static \u0275cmp=e.VBU({type:m,selectors:[["app-loading-spinner"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"flex","justify-center","items-center","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-accent"]],template:function(P,n){1&P&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.k0s())},encapsulation:2})}return m})()},2601:(E,v,r)=>{r.d(v,{e:()=>_});var e=r(4438),d=r(177),m=r(7408);function x(s,f){if(1&s){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(i);const l=e.XpG(2);return e.Njj(l.onPageChange(1))}),e.EFF(1," 1 "),e.k0s()}}function h(s,f){1&s&&(e.j41(0,"span",8),e.EFF(1,"..."),e.k0s())}function P(s,f){if(1&s){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){const l=e.eBV(i).$implicit,y=e.XpG(2);return e.Njj(y.onPageChange(l))}),e.EFF(1),e.k0s()}if(2&s){const i=f.$implicit,c=e.XpG(2);e.AVh("bg-red-600",i===c.currentPage),e.R7$(),e.SpI(" ",i," ")}}function n(s,f){1&s&&(e.j41(0,"span",8),e.EFF(1,"..."),e.k0s())}function g(s,f){if(1&s){const i=e.RV6();e.j41(0,"button",7),e.bIt("click",function(){e.eBV(i);const l=e.XpG(2);return e.Njj(l.onPageChange(l.totalPages))}),e.EFF(1),e.k0s()}if(2&s){const i=e.XpG(2);e.R7$(),e.SpI(" ",i.totalPages," ")}}function t(s,f){if(1&s){const i=e.RV6();e.j41(0,"div",1)(1,"button",2),e.bIt("click",function(){e.eBV(i);const l=e.XpG();return e.Njj(l.onPageChange(l.currentPage-1))}),e.EFF(2," \u2190 "),e.k0s(),e.DNE(3,x,2,0,"button",3)(4,h,2,0,"span",4)(5,P,2,3,"button",5)(6,n,2,0,"span",4)(7,g,2,1,"button",3),e.j41(8,"button",2),e.bIt("click",function(){e.eBV(i);const l=e.XpG();return e.Njj(l.onPageChange(l.currentPage+1))}),e.EFF(9," \u2192 "),e.k0s(),e.j41(10,"span",6),e.EFF(11),e.nI1(12,"translate"),e.nI1(13,"translate"),e.k0s()()}if(2&s){const i=e.XpG();e.R7$(),e.Y8G("disabled",1===i.currentPage),e.R7$(2),e.Y8G("ngIf",i.pages[0]>1),e.R7$(),e.Y8G("ngIf",i.pages[0]>2),e.R7$(),e.Y8G("ngForOf",i.pages),e.R7$(),e.Y8G("ngIf",i.pages[i.pages.length-1]<i.totalPages-1),e.R7$(),e.Y8G("ngIf",i.pages[i.pages.length-1]<i.totalPages),e.R7$(),e.Y8G("disabled",i.currentPage===i.totalPages),e.R7$(3),e.LHq(" ",e.bMT(12,11,"common.pagination.page")," ",i.currentPage," ",e.bMT(13,13,"common.pagination.of")," ",i.totalPages," ")}}let _=(()=>{class s{currentPage=1;totalPages=1;pageChange=new e.bkB;pages=[];ngOnChanges(i){(i.currentPage||i.totalPages)&&this.updatePagination(),this.updatePagination()}updatePagination(){let c=Math.max(1,this.currentPage-Math.floor(2.5)),l=Math.min(this.totalPages,c+5-1);l-c+1<5&&(c=Math.max(1,l-5+1)),this.pages=Array.from({length:l-c+1},(y,M)=>c+M)}onPageChange(i){i>=1&&i<=this.totalPages&&i!==this.currentPage&&this.pageChange.emit(i)}static \u0275fac=function(c){return new(c||s)};static \u0275cmp=e.VBU({type:s,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},standalone:!0,features:[e.OA$,e.aNF],decls:1,vars:1,consts:[["class","flex items-center justify-center space-x-2 py-8",4,"ngIf"],[1,"flex","items-center","justify-center","space-x-2","py-8"],[1,"px-3","py-1","rounded","bg-gray-800","text-white","hover:bg-gray-700","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","px-3 py-1 rounded bg-gray-800 text-white hover:bg-gray-700",3,"click",4,"ngIf"],["class","text-gray-600",4,"ngIf"],["class","px-3 py-1 rounded bg-gray-800 text-white hover:bg-gray-700",3,"bg-red-600","click",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-400","ml-4"],[1,"px-3","py-1","rounded","bg-gray-800","text-white","hover:bg-gray-700",3,"click"],[1,"text-gray-600"]],template:function(c,l){1&c&&e.DNE(0,t,14,15,"div",0),2&c&&e.Y8G("ngIf",l.totalPages>0)},dependencies:[d.MD,d.Sq,d.bT,m.h,m.D9],styles:["button[_ngcontent-%COMP%]{transition:all .2s ease;min-width:2.5rem;height:2.5rem;display:inline-flex;align-items:center;justify-content:center;font-weight:500}button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}button[_ngcontent-%COMP%]:not(:disabled):hover{background:#e50914;transform:scale(1.05)}button.bg-red-600[_ngcontent-%COMP%]{background:#e50914}button.bg-red-600[_ngcontent-%COMP%]:hover{background:#b30710}"]})}return s})()},3498:(E,v,r)=>{r.d(v,{W:()=>x});var e=r(6354),d=r(4438),m=r(1626);let x=(()=>{class h{http;baseUrl="https://phimapi.com";constructor(n){this.http=n}imageBaseUrl="https://phimimg.com";addImageBaseUrl(n){return n&&(n.startsWith("http")?n:`${this.imageBaseUrl}/${n}`)}transformResponse(n,g){if(g){const t=n;if("success"!==t.status)throw new Error(t.msg||"API returned unsuccessful status");if(!t.data?.items)throw new Error("No items found in response");return{items:t.data.items.map(_=>({..._,poster_url:this.addImageBaseUrl(_.poster_url),thumb_url:this.addImageBaseUrl(_.thumb_url)})),pagination:t.data.params.pagination}}{const t=n;if(!t.status)throw new Error("API returned unsuccessful status");if(!t.items)throw new Error("No items found in response");return{items:t.items.map(_=>({..._,poster_url:this.addImageBaseUrl(_.poster_url),thumb_url:this.addImageBaseUrl(_.thumb_url)})),pagination:t.pagination}}}isV1Endpoint(n){return n.includes("/v1/api/")}makeRequest(n,g={}){const t=`${this.baseUrl}${n}`,_=this.isV1Endpoint(n),s={...g};return this.http.get(t,{params:s}).pipe((0,e.T)(f=>this.transformResponse(f,_)))}getLatestMovies(n=1){return this.makeRequest("/danh-sach/phim-moi-cap-nhat",{page:n.toString()})}getMoviesByCategory(n,g=1){return this.makeRequest(`/v1/api/the-loai/${n}`,{page:g.toString()})}getMoviesByCountry(n,g=1){return this.makeRequest(`/v1/api/quoc-gia/${n}`,{page:g.toString()})}getMoviesByCategoryAndCountry(n,g,t=1){return this.makeRequest(`/v1/api/the-loai/${n}?country=${g}`,{page:t.toString()})}getMovieDetails(n){return this.http.get(`${this.baseUrl}/phim/${n}`).pipe((0,e.T)(t=>{if(!t.status)throw new Error(t.msg||"Failed to fetch movie details");return{...t,movie:{...t.movie,poster_url:this.addImageBaseUrl(t.movie.poster_url),thumb_url:this.addImageBaseUrl(t.movie.thumb_url)}}}))}getTrendingMovies(n=1){return this.makeRequest("/v1/api/danh-sach/tv-shows",{page:n.toString()})}getSingleMovies(n=1){return this.makeRequest("/v1/api/danh-sach/phim-le",{page:n.toString()})}getSeriesMovies(n=1){return this.makeRequest("/v1/api/danh-sach/phim-bo",{page:n.toString()})}getAnimeMovies(n=1){return this.makeRequest("/v1/api/danh-sach/hoat-hinh",{page:n.toString()})}getCategories(){return this.http.get(`${this.baseUrl}/the-loai`)}getCountries(){return this.http.get(`${this.baseUrl}/quoc-gia`)}searchMovies(n){const t={};return n.keyword&&(t.keyword=n.keyword),n.page&&(t.page=n.page.toString()),n.sort_field&&(t.sort_field=n.sort_field),n.sort_type&&(t.sort_type=n.sort_type),n.sort_lang&&(t.sort_lang=n.sort_lang),n.category&&(t.category=n.category),n.country&&(t.country=n.country),n.year&&(t.year=n.year.toString()),n.limit&&(t.limit=n.limit.toString()),this.makeRequest("/v1/api/tim-kiem",t)}static \u0275fac=function(g){return new(g||h)(d.KVO(m.Qq))};static \u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);